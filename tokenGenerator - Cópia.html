<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Tokenizer Generator</title>
		<meta name="description" content="Tokenise Your World with Ease: Introducing Tokeniser - Your One-Click Solution for Creating and Managing Tokens. From Transactions to Ownership, Unleash the Potential Today!" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<!-- fav icon -->
		<link rel="icon" href="assets/images/fav-icon/fav-icon.png">
		
		<!-- bootstarp -->
		<link rel="stylesheet" href="css/vendors/bootstrap.min.css">
		
		<!-- animate.css file -->
		<link rel="stylesheet" href="css/vendors/animate.css">
		
		<!-- Swiper -->
		<link rel="stylesheet" href="css/vendors/swiper-bundle.min.css">
		
		<!-- flaticon -->
		<link rel="stylesheet" href="css/vendors/flaticon/flaticon.css">
		
		<!-- fontAwesome -->
		<link rel="stylesheet" href="css/vendors/all.min.css">
		
		<!-- bootstrap icons -->
		<link rel="stylesheet" href="css/vendors/bootstrap-icons-1.9.1/bootstrap-icons.css">
		
		<!-- Fancybox -->
		<link rel="stylesheet" href="css/vendors/jquery.fancybox.min.css">
		
		<!-- fonts site preconnect -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		
		<!-- fonts site preconnect -->
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		
		<!-- Font Family -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700;800&amp;display=swap">
		
		<!-- main-LTR -->
		<link rel="stylesheet" href="css/main-LTR.css">
        <link rel="stylesheet" href="tokenGenStyle.css">
        <style>
            body {
                background-color: #fff;
            }
            #metamaskButton {
                border: solid 2px #444;
                border-radius: 8px;;
                font-size:20px;
                padding: 15px 30px 15px 65px;
                background: #dd6e2e;
                background-image: url("assets/images/tokenGenerator/metamaskLogo.png");
                background-size: 40px;
                background-repeat: no-repeat;
                background-position: 20px;
                font-weight: bold;
                color: #fff;
                box-shadow: inset 2px 2px 0 #fff, 0 8px 10px -4px rgba(0,0,0,0.4);
                cursor: pointer;
                transition: all 0.4s ease;
            }
          
            #metamaskButton:hover {
                border: solid 2px #444;
                border-radius: 8px;;
                font-size:20px;
                padding: 15px 30px 15px 65px;
                background: #f18b50;
                background-image: url("assets/images/tokenGenerator/metamaskLogo.png");
                background-size: 40px;
                background-repeat: no-repeat;
                background-position: 20px;
                font-weight: bold;
                color: #fff;
                box-shadow: inset 2px 2px 0 #fff, 0 8px 10px -4px rgba(0,0,0,0.4);
                cursor: pointer;
                transition: all 0.4s ease;
            }

            label {
                color:black !important;
            }

            #formTips {display: none;}
        </style>

        
<script src="https://c0f4f41c-2f55-4863-921b-sdk-docs.github.io/cdn/metamask-sdk.js"></script>

<script>

    const MMSDK = new MetaMaskSDK.MetaMaskSDK()
    // Because init process of the MetaMaskSDK is async.
    setTimeout(() => {
        const ethereum = MMSDK.getProvider() // This can also be accessed via window.ethereum

        ethereum.request({ method: 'eth_requestAccounts' })
    }, 0)

</script>
	</head>
	<body class="h-100">
		<!--Start Page Header-->
		<header class=" header-basic" id="page-header">
			<div class="container">
				<!--Start navbar-->
				<nav class="menu-navbar" id="main-nav">
					<!-- logo image is repeating 2 times above due to navbar old setup, needs to be reviewed -->
					<div class="header-logo"><a class="logo-link" href="#" alt="logo"><img class="logo-img light-logo" loading="lazy" src="assets/images/logo/logo-dark.png" alt="logo"/><img class="logo-img  dark-logo" loading="lazy" src="assets/images/logo/logo-dark.png" alt="logo"/></a></div>
					<div class="links menu-wrapper ">
						<ul class="list-js links-list">
							<li class="nav-item menu-item has-sub-menu"><a class="nav-link menu-link   active" href="index.html/#home">HOME</a></li>
							<li class="nav-item menu-item"><a class="nav-link menu-link" href="index.html/#about">ABOUT</a></li>
							<li class="nav-item menu-item"><a class="nav-link menu-link" href="index.html/#howItWorks">HOW IT WORKS</a></li>
							<li class="nav-item menu-item"><a class="nav-link menu-link" href="index.html/#faq">FAQ </a></li>
							<li class="nav-item menu-item"><a class="nav-link menu-link" href="index.html/#contact-us">CONTACT</a></li>
						</ul>
                        
					</div>
					<div class="controls-box">
                        <button id="metamaskButton">Connect Metamask</button>
						<!--Menu Toggler button-->
						<div class="control  menu-toggler"><span></span><span></span><span></span></div>
						<!--Dark/Light mode button-->
						<!-- <div class="mode-switcher ">
							<div class="switch-inner go-light " title="Switch To Light Mode "><i class="bi bi-sun icon "></i></div>
							<div class="switch-inner go-dark" title="Switch To Dark Mode "><i class="bi bi-moon icon "></i></div>
						</div> -->
						<!--mini shoping cart-->
					</div>
				</nav>
			</div>
			<!--End navbar-->
		</header>
		<!--End Page Header-->
        		<!-- Start  about Section-->
		<section class="about mega-section align-items-center" id="about">
			<div class="container">
				<!-- Start first about div-->
				<div class="content-block m-auto">
					<div class="row">
						<div class="col-12 d-flex justify-content-center mx-auto about-col pad-end">
							<div class="text-area ">
								<div class="sec-heading centered light-title ">
									<div class="content-area text-center d-flex justify-content-center">
										<h2 class=" title wow fadeInUp" data-wow-delay=".2s"><span class='hollow-text d-flex justify-content-center'>TOKENIZER</span></h2>
									</div>

                                    <h3>Creating tokens for <span class='featured-text'>  anything.
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 150" preserveAspectRatio="none">
													<path d="M7.7,145.6C109,125,299.9,116.2,401,121.3c42.1,2.2,87.6,11.8,87.3,25.7"></path></svg>
												</span>
											</h3>
								</div>
								<p class="about-text">
                                    The world's pioneering tool that empowers anyone to establish a token with a mere click.
									Yet, that's not all; it also crafts all the essential components a token necessitates for its effective existence, encompassing logos,
									 web pages, and more. So, dispel your apprehensions, for in the imminent future, we're poised to tokenise everything!
								</p>
							</div>
						</div>
					</div>
                    <div class="container h-100 mt-0">
                        <div class="row h-100 justify-content-center align-items-center">
                            <div class="col-10 col-md-8 col-lg-6">
                                <div class="card shadow-lg" >
                                <div class="card-body">
                                <!-- Form -->
                                <form class="form" id="tokenForm" method="POST" >
                                    <h3 class="card-title m-3 text-dark">Token Information</h3>
                                    <p class="description card-title m-3 text-dark">Basic details about your token.</p>
                                    <!-- Input fields -->
                                    <fieldset class="form-group">
                                        <label for="tokenType" key="typeOfToken">Select Type OF Token</label>
                                        <select  id = "tokenType" class="form-control" name="tokenType" required>
                                            <option value="bep20">BEP20</option>
                                            <option value="erc20">ERC20</option>
                                        </select>
                                    <div class="form-group NameField mb-3">
                                        <label for="tokenName" key="tokenName">Token Name:</label>
                                        <input type="text" class="form-control" id="tokenName" 
                                            placeholder="Token Name (For example: BestToken)" name="tokenName" required>
                                    </div>
                                    <div class="form-group SymbolField mb-3">
                                        <label for="tokenSymbol" key="tokenSymbol">Token Symbol:</label>
                                        <input type="text" class="form-control" id="tokenSymbol" 
                                            placeholder="Token Symbol (For example: BST)" name="tokenSymbol" required>
                                    </div>
                                    
                                    <fieldset class="form-group MaxSupplyField mb-3">
                                        <label for="maxSupply" key="maxSupply">Max Supply Amount (>= 10 000):</label>
                                        <input id="maxSupply" class="form-control" name="maxSupply" type="number" min="1" max="100000" required/>
                                    </fieldset>
                                      <br>
                                    <!-- <div id="formTips" class="text-danger" key="FormTipsKey">Please fill out the form completelyã€‚</div> -->
                                    <div id="errorMessage" style="color: red;"></div><br>
                                        <img id="loader1" src="loading.gif" alt=""></img>
                                    <button  id="TokenSubmit" class="btn btn-primary ml-auto" type="submit" title="Next">Create Token</button>
                                    <!-- End input fields -->
                                </form>
                                <div id="successMessage" style="display: none; color: rgb(67, 240, 67);"></div><br>
                                <!-- Form end -->
                            </div>
                        </div>
                    </div>
				</div>
				<!--End first about div-->
				<!-- Start first about div-->
            </div>
                </div>
            </div>
        </section>
            <!-- End back-to-top Component-->   
            <!--     JQuery     -->
            <script src="js/vendors/jquery-3.6.1.min.js"></script>
            <!--     appear     -->
            <script src="js/vendors/appear.min.js"></script>
            <!--     bootstrap     -->
            <script src="js/vendors/bootstrap.bundle.min.js"></script>
            <!--     countTo     -->
            <script src="js/vendors/jquery.countTo.js"></script>
            <!--     wow     -->
            <script src="js/vendors/wow.min.js"></script>
            <!--     swiper     -->
            <script src="js/vendors/swiper-bundle.min.js"></script>
            <!--     particles     -->
            <script src="js/vendors/particles.min.js"></script>
            <!--     Vanilla-tilt     -->
            <script src="js/vendors/vanilla-tilt.min.js"></script>
            <!--     isotope     -->
            <script src="js/vendors/isotope-min.js"></script>
            <!--     fancybox     -->
            <script src="js/vendors/jquery.fancybox.min.js"></script>
            <!--     main     -->
            <script src="js/main.js"></script>
            <script src="js/sweetAlert.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
            <script>
        document.getElementById('metamaskButton').addEventListener('click', async (event) => {
            let button = event.target;

            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                let accountAddress = accounts[0];
                console.log(accountAddress);
                button.textContent = accountAddress;
            } catch (error) {
                console.error("Error requesting accounts:", error);
            }
        });

        async function connectWeb3() {
        if (window.ethereum) {
            window.web3 = new Web3(window.ethereum);
            try {
                await window.ethereum.request({ method: 'eth_requestAccounts' });
            } catch (error) {
                console.error("User denied account access");
            }
        }
}

        async function load() {
            await connectWeb3();
            window.contract = await loadContract(contractAddresses.bep20); // Default to BEP20;
            updateStatus('Ready!');
        }

        function updateStatus(status) {
            const web3Logged = document.getElementById('metamaskButton');
            web3Logged.innerHTML = status;
            console.log(status);
        }

        // Define your contract ABI and address here
        const contractABI = [
            {
                "inputs": [
                    {
                    "internalType": "string",
                    "name": "name",
                    "type": "string"
                    },
                    {
                    "internalType": "string",
                    "name": "symbol",
                    "type": "string"
                    },
                    {
                    "internalType": "uint256",
                    "name": "maxSupply",
                    "type": "uint256"
                    }
                ],
                "name": "newToken",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
                },
                {
                "inputs": [
                    {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                    },
                    {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                    }
                ],
                "name": "tokens",
                "outputs": [
                    {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
                }
        ];

        const contractAddresses = {
        bep20: '0xBD8D5Acba4f00ffeA7EC84b830028fB4d5a18060', // BEP20 contract address
        erc20: '0xc832b4f7E542A4eCc087a37BB12b4B8c2b109f22', // ERC20 contract address
    };
   
    const bscMainnet = {
    chainId: '0x13881'
};

const sepoliaTestnet = {
    chainId: '0xaa36a7' 
};

async function switchNetwork(networkToUse) {
    try {
        await ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{ chainId }]
        });
    } catch (error) {
        if (error.code === 4902) {
            console.error("User rejected network switch:", error);
        } else {
            console.error("Error switching network:", error);
        }
    }
}


        async function loadContract(contractAddress) {
            const web3 = new Web3(ethereum);
            return new web3.eth.Contract(contractABI, contractAddress);
        }

        async function getCurrentAccount() {
            try {
                const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
                return accounts[0];
            } catch (error) {
                console.error("Error requesting accounts:", error);
            }
        }

        const tokenForm = document.getElementById("tokenForm");
        const tokenTypeSelect = document.getElementById('tokenType');

        tokenTypeSelect.addEventListener('change', async () => {
            const selectedOption = tokenTypeSelect.value; //check changes in token type
            let networkToUse; // Define the selected network object

            if (selectedOption === 'bep20') {
                contractAddress = contractAddresses.bep20;
                // Set selected network to Binance Smart Chain Testnet
                networkToUse = bscMainnet.chainId;
            } else if (selectedOption === 'erc20') {
                contractAddress = contractAddresses.erc20;
                // Switch to Sepolia Ethereum Testnet
                networkToUse = sepoliaTestnet.chainId;
            } else {
                console.error('Invalid token type selected.');
                return;
            }
            try {
                await ethereum.enable();
            } catch (error) {
                console.error("Error enabling account:", error);
            }
        });
        tokenForm.addEventListener("submit", async function (event) {
            event.preventDefault();
            load();
            
            const formData = new FormData(tokenForm);
            // const tokenType = formData.get("tokenType");
            const tokenName = formData.get("tokenName");
            const tokenSymbol = formData.get("tokenSymbol");
            const maxSupply = formData.get("maxSupply");
            const selectedOption = tokenTypeSelect.value;

            let contractToUse;
            let networkToUse;

            if (selectedOption === 'bep20') {
                contractToUse = contractAddresses.bep20;
                networkToUse = bscMainnet.chainId;
            } else if (selectedOption === 'erc20') {
                contractToUse = contractAddresses.erc20;
                networkToUse = sepoliaTestnet.chainId;
            } else {
                console.error('Invalid token type selected.');
                return;
            }
            
            const requestData = {
                // tokenType,
                name: tokenName,
                symbol: tokenSymbol,
                maxSupply: web3.utils.toWei(maxSupply, 'ether'), // Convert to wei,
            };
            
            const account = await getCurrentAccount();
            const contract = await loadContract(contractToUse);
            const network = await switchNetwork(networkToUse);
            try {
                const gasPrice = await web3.eth.getGasPrice();
                const transaction = await contract.methods.newToken(requestData.name, requestData.symbol, requestData.maxSupply).send({
                    from: account,
                    gasPrice: gasPrice,
                });
                console.log("Transaction Receipt:", transaction);
            } catch (error) {
                console.error("Error sending new token info:", error);
            }
        });

            </script>
    </body>
</html>
